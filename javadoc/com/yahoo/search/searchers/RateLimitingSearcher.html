<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (1.8.0_60) on Fri Mar 31 07:36:47 UTC 2017 -->
<title>RateLimitingSearcher</title>
<meta name="date" content="2017-03-31">
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="RateLimitingSearcher";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":10};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../com/yahoo/search/searchers/InputCheckingSearcher.html" title="class in com.yahoo.search.searchers"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../../com/yahoo/search/searchers/ValidateMatchPhaseSearcher.html" title="class in com.yahoo.search.searchers"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?com/yahoo/search/searchers/RateLimitingSearcher.html" target="_top">Frames</a></li>
<li><a href="RateLimitingSearcher.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">com.yahoo.search.searchers</div>
<h2 title="Class RateLimitingSearcher" class="title">Class RateLimitingSearcher</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li><a href="http://download.java.net/jdk8/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">java.lang.Object</a></li>
<li>
<ul class="inheritance">
<li><a href="../../../../com/yahoo/component/AbstractComponent.html" title="class in com.yahoo.component">com.yahoo.component.AbstractComponent</a></li>
<li>
<ul class="inheritance">
<li><a href="../../../../com/yahoo/component/chain/ChainedComponent.html" title="class in com.yahoo.component.chain">com.yahoo.component.chain.ChainedComponent</a></li>
<li>
<ul class="inheritance">
<li><a href="../../../../com/yahoo/processing/Processor.html" title="class in com.yahoo.processing">com.yahoo.processing.Processor</a></li>
<li>
<ul class="inheritance">
<li><a href="../../../../com/yahoo/search/Searcher.html" title="class in com.yahoo.search">com.yahoo.search.Searcher</a></li>
<li>
<ul class="inheritance">
<li>com.yahoo.search.searchers.RateLimitingSearcher</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Implemented Interfaces:</dt>
<dd><a href="../../../../com/yahoo/component/Component.html" title="interface in com.yahoo.component">Component</a>, <a href="http://download.java.net/jdk8/docs/api/java/lang/Comparable.html?is-external=true" title="class or interface in java.lang">Comparable</a>&lt;<a href="../../../../com/yahoo/component/Component.html" title="interface in com.yahoo.component">Component</a>&gt;</dd>
</dl>
<hr>
<br>
<pre>public class <a href="../../../../src-html/com/yahoo/search/searchers/RateLimitingSearcher.html#line.53">RateLimitingSearcher</a>
extends <a href="../../../../com/yahoo/search/Searcher.html" title="class in com.yahoo.search">Searcher</a></pre>
<div class="block">A simple rate limiter.
 <p>
 This takes these query parameter arguments:
 <ul>
     <li>rate.id - (String) the id of the client from rate limiting perspective
     <li>rate.cost - (Double) the cost Double of this query. This is read after executing the query and hence can be set
     by downstream searchers inspecting the result to allow differencing the cost of various queries. Default is 1.
     <li>rate.quota - (Double) the cost per second a particular id is allowed to consume in this system.
     <li>rate.idDimension - (String) the name of the rate-id dimension used when logging metrics.
                                 If this is not specified, the metric will be logged without dimensions.
     <li>rate.dryRun - (Boolean) emit metrics on rejected requests but don't actually reject them
 </ul>
 <p>
 Whenever quota is exceeded for an id this searcher will reject queries from that id by
 returning a result containing a status 429 error.
 <p>
 If rate.id or rate.quota is not set in Query.properties this searcher will do nothing.
 <p>
 Metrics: This will emit the count metric requestsOverQuota with the dimension [rate.idDimension=rate.id]
 counting rejected requests.
 <p>
 Ordering: This searcher Provides rateLimiting</div>
<dl>
<dt><span class="simpleTagLabel">Author:</span></dt>
<dd>bratseth</dd>
</dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- =========== FIELD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="field.summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Field Summary table, listing fields, and an explanation">
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Field and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static <a href="../../../../com/yahoo/processing/request/CompoundName.html" title="class in com.yahoo.processing.request">CompoundName</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/yahoo/search/searchers/RateLimitingSearcher.html#costKey">costKey</a></span></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static <a href="../../../../com/yahoo/processing/request/CompoundName.html" title="class in com.yahoo.processing.request">CompoundName</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/yahoo/search/searchers/RateLimitingSearcher.html#dryRunKey">dryRunKey</a></span></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static <a href="../../../../com/yahoo/processing/request/CompoundName.html" title="class in com.yahoo.processing.request">CompoundName</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/yahoo/search/searchers/RateLimitingSearcher.html#idDimensionKey">idDimensionKey</a></span></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static <a href="../../../../com/yahoo/processing/request/CompoundName.html" title="class in com.yahoo.processing.request">CompoundName</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/yahoo/search/searchers/RateLimitingSearcher.html#idKey">idKey</a></span></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static <a href="../../../../com/yahoo/processing/request/CompoundName.html" title="class in com.yahoo.processing.request">CompoundName</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/yahoo/search/searchers/RateLimitingSearcher.html#quotaKey">quotaKey</a></span></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static <a href="http://download.java.net/jdk8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/yahoo/search/searchers/RateLimitingSearcher.html#RATE_LIMITING">RATE_LIMITING</a></span></code>
<div class="block">Constant containing the name this Provides - "rateLimiting", for ordering constraints</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="fields.inherited.from.class.com.yahoo.component.AbstractComponent">
<!--   -->
</a>
<h3>Fields inherited from class&nbsp;com.yahoo.component.<a href="../../../../com/yahoo/component/AbstractComponent.html" title="class in com.yahoo.component">AbstractComponent</a></h3>
<code><a href="../../../../com/yahoo/component/AbstractComponent.html#isDeconstructable">isDeconstructable</a></code></li>
</ul>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><span class="memberNameLink"><a href="../../../../com/yahoo/search/searchers/RateLimitingSearcher.html#RateLimitingSearcher-com.yahoo.search.config.RateLimitingConfig-com.yahoo.cloud.config.ClusterInfoConfig-com.yahoo.metrics.simple.MetricReceiver-">RateLimitingSearcher</a></span>(com.yahoo.search.config.RateLimitingConfig&nbsp;rateLimitingConfig,
                    com.yahoo.cloud.config.ClusterInfoConfig&nbsp;clusterInfoConfig,
                    <a href="../../../../com/yahoo/metrics/simple/MetricReceiver.html" title="class in com.yahoo.metrics.simple">MetricReceiver</a>&nbsp;metric)</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colOne"><code><span class="memberNameLink"><a href="../../../../com/yahoo/search/searchers/RateLimitingSearcher.html#RateLimitingSearcher-com.yahoo.search.config.RateLimitingConfig-com.yahoo.cloud.config.ClusterInfoConfig-com.yahoo.metrics.simple.MetricReceiver-java.time.Clock-">RateLimitingSearcher</a></span>(com.yahoo.search.config.RateLimitingConfig&nbsp;rateLimitingConfig,
                    com.yahoo.cloud.config.ClusterInfoConfig&nbsp;clusterInfoConfig,
                    <a href="../../../../com/yahoo/metrics/simple/MetricReceiver.html" title="class in com.yahoo.metrics.simple">MetricReceiver</a>&nbsp;metric,
                    java.time.Clock&nbsp;clock)</code>
<div class="block">For testing - allows injection of a timer to avoid depending on the system clock</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code><a href="../../../../com/yahoo/search/Result.html" title="class in com.yahoo.search">Result</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/yahoo/search/searchers/RateLimitingSearcher.html#search-com.yahoo.search.Query-com.yahoo.search.searchchain.Execution-">search</a></span>(<a href="../../../../com/yahoo/search/Query.html" title="class in com.yahoo.search">Query</a>&nbsp;query,
      <a href="../../../../com/yahoo/search/searchchain/Execution.html" title="class in com.yahoo.search.searchchain">Execution</a>&nbsp;execution)</code>
<div class="block">Override this to implement your searcher.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.com.yahoo.search.Searcher">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;com.yahoo.search.<a href="../../../../com/yahoo/search/Searcher.html" title="class in com.yahoo.search">Searcher</a></h3>
<code><a href="../../../../com/yahoo/search/Searcher.html#ensureFilled-com.yahoo.search.Result-java.lang.String-com.yahoo.search.searchchain.Execution-">ensureFilled</a>, <a href="../../../../com/yahoo/search/Searcher.html#fill-com.yahoo.search.Result-java.lang.String-com.yahoo.search.searchchain.Execution-">fill</a>, <a href="../../../../com/yahoo/search/Searcher.html#getLogger--">getLogger</a>, <a href="../../../../com/yahoo/search/Searcher.html#process-com.yahoo.processing.Request-com.yahoo.processing.execution.Execution-">process</a>, <a href="../../../../com/yahoo/search/Searcher.html#toString--">toString</a></code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.com.yahoo.component.chain.ChainedComponent">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;com.yahoo.component.chain.<a href="../../../../com/yahoo/component/chain/ChainedComponent.html" title="class in com.yahoo.component.chain">ChainedComponent</a></h3>
<code><a href="../../../../com/yahoo/component/chain/ChainedComponent.html#getAnnotatedDependencies-java.lang.Class-java.lang.Class-java.lang.Class-">getAnnotatedDependencies</a>, <a href="../../../../com/yahoo/component/chain/ChainedComponent.html#getDefaultAnnotatedDependencies--">getDefaultAnnotatedDependencies</a>, <a href="../../../../com/yahoo/component/chain/ChainedComponent.html#getDependencies--">getDependencies</a>, <a href="../../../../com/yahoo/component/chain/ChainedComponent.html#initDependencies-com.yahoo.component.chain.dependencies.Dependencies-">initDependencies</a></code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.com.yahoo.component.AbstractComponent">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;com.yahoo.component.<a href="../../../../com/yahoo/component/AbstractComponent.html" title="class in com.yahoo.component">AbstractComponent</a></h3>
<code><a href="../../../../com/yahoo/component/AbstractComponent.html#clone--">clone</a>, <a href="../../../../com/yahoo/component/AbstractComponent.html#compareTo-com.yahoo.component.Component-">compareTo</a>, <a href="../../../../com/yahoo/component/AbstractComponent.html#deconstruct--">deconstruct</a>, <a href="../../../../com/yahoo/component/AbstractComponent.html#getClassName--">getClassName</a>, <a href="../../../../com/yahoo/component/AbstractComponent.html#getId--">getId</a>, <a href="../../../../com/yahoo/component/AbstractComponent.html#getIdString--">getIdString</a>, <a href="../../../../com/yahoo/component/AbstractComponent.html#hasInitializedId--">hasInitializedId</a>, <a href="../../../../com/yahoo/component/AbstractComponent.html#initId-com.yahoo.component.ComponentId-">initId</a>, <a href="../../../../com/yahoo/component/AbstractComponent.html#isDeconstructable--">isDeconstructable</a>, <a href="../../../../com/yahoo/component/AbstractComponent.html#setIsDeconstructable--">setIsDeconstructable</a></code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.<a href="http://download.java.net/jdk8/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></h3>
<code><a href="http://download.java.net/jdk8/docs/api/java/lang/Object.html?is-external=true#equals-java.lang.Object-" title="class or interface in java.lang">equals</a>, <a href="http://download.java.net/jdk8/docs/api/java/lang/Object.html?is-external=true#finalize--" title="class or interface in java.lang">finalize</a>, <a href="http://download.java.net/jdk8/docs/api/java/lang/Object.html?is-external=true#getClass--" title="class or interface in java.lang">getClass</a>, <a href="http://download.java.net/jdk8/docs/api/java/lang/Object.html?is-external=true#hashCode--" title="class or interface in java.lang">hashCode</a>, <a href="http://download.java.net/jdk8/docs/api/java/lang/Object.html?is-external=true#notify--" title="class or interface in java.lang">notify</a>, <a href="http://download.java.net/jdk8/docs/api/java/lang/Object.html?is-external=true#notifyAll--" title="class or interface in java.lang">notifyAll</a>, <a href="http://download.java.net/jdk8/docs/api/java/lang/Object.html?is-external=true#wait--" title="class or interface in java.lang">wait</a>, <a href="http://download.java.net/jdk8/docs/api/java/lang/Object.html?is-external=true#wait-long-" title="class or interface in java.lang">wait</a>, <a href="http://download.java.net/jdk8/docs/api/java/lang/Object.html?is-external=true#wait-long-int-" title="class or interface in java.lang">wait</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<ul class="blockList">
<li class="blockList"><a name="field.detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a name="RATE_LIMITING">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>RATE_LIMITING</h4>
<pre>public static final&nbsp;<a href="http://download.java.net/jdk8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a> <a href="../../../../src-html/com/yahoo/search/searchers/RateLimitingSearcher.html#line.56">RATE_LIMITING</a></pre>
<div class="block">Constant containing the name this Provides - "rateLimiting", for ordering constraints</div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../constant-values.html#com.yahoo.search.searchers.RateLimitingSearcher.RATE_LIMITING">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a name="idKey">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>idKey</h4>
<pre>public static final&nbsp;<a href="../../../../com/yahoo/processing/request/CompoundName.html" title="class in com.yahoo.processing.request">CompoundName</a> <a href="../../../../src-html/com/yahoo/search/searchers/RateLimitingSearcher.html#line.58">idKey</a></pre>
</li>
</ul>
<a name="costKey">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>costKey</h4>
<pre>public static final&nbsp;<a href="../../../../com/yahoo/processing/request/CompoundName.html" title="class in com.yahoo.processing.request">CompoundName</a> <a href="../../../../src-html/com/yahoo/search/searchers/RateLimitingSearcher.html#line.59">costKey</a></pre>
</li>
</ul>
<a name="quotaKey">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>quotaKey</h4>
<pre>public static final&nbsp;<a href="../../../../com/yahoo/processing/request/CompoundName.html" title="class in com.yahoo.processing.request">CompoundName</a> <a href="../../../../src-html/com/yahoo/search/searchers/RateLimitingSearcher.html#line.60">quotaKey</a></pre>
</li>
</ul>
<a name="idDimensionKey">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>idDimensionKey</h4>
<pre>public static final&nbsp;<a href="../../../../com/yahoo/processing/request/CompoundName.html" title="class in com.yahoo.processing.request">CompoundName</a> <a href="../../../../src-html/com/yahoo/search/searchers/RateLimitingSearcher.html#line.61">idDimensionKey</a></pre>
</li>
</ul>
<a name="dryRunKey">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>dryRunKey</h4>
<pre>public static final&nbsp;<a href="../../../../com/yahoo/processing/request/CompoundName.html" title="class in com.yahoo.processing.request">CompoundName</a> <a href="../../../../src-html/com/yahoo/search/searchers/RateLimitingSearcher.html#line.62">dryRunKey</a></pre>
</li>
</ul>
</li>
</ul>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="RateLimitingSearcher-com.yahoo.search.config.RateLimitingConfig-com.yahoo.cloud.config.ClusterInfoConfig-com.yahoo.metrics.simple.MetricReceiver-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>RateLimitingSearcher</h4>
<pre>@Inject
public&nbsp;<a href="../../../../src-html/com/yahoo/search/searchers/RateLimitingSearcher.html#line.88">RateLimitingSearcher</a>(com.yahoo.search.config.RateLimitingConfig&nbsp;rateLimitingConfig,
                                    com.yahoo.cloud.config.ClusterInfoConfig&nbsp;clusterInfoConfig,
                                    <a href="../../../../com/yahoo/metrics/simple/MetricReceiver.html" title="class in com.yahoo.metrics.simple">MetricReceiver</a>&nbsp;metric)</pre>
</li>
</ul>
<a name="RateLimitingSearcher-com.yahoo.search.config.RateLimitingConfig-com.yahoo.cloud.config.ClusterInfoConfig-com.yahoo.metrics.simple.MetricReceiver-java.time.Clock-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>RateLimitingSearcher</h4>
<pre>public&nbsp;<a href="../../../../src-html/com/yahoo/search/searchers/RateLimitingSearcher.html#line.93">RateLimitingSearcher</a>(com.yahoo.search.config.RateLimitingConfig&nbsp;rateLimitingConfig,
                            com.yahoo.cloud.config.ClusterInfoConfig&nbsp;clusterInfoConfig,
                            <a href="../../../../com/yahoo/metrics/simple/MetricReceiver.html" title="class in com.yahoo.metrics.simple">MetricReceiver</a>&nbsp;metric,
                            java.time.Clock&nbsp;clock)</pre>
<div class="block">For testing - allows injection of a timer to avoid depending on the system clock</div>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="search-com.yahoo.search.Query-com.yahoo.search.searchchain.Execution-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>search</h4>
<pre>public&nbsp;<a href="../../../../com/yahoo/search/Result.html" title="class in com.yahoo.search">Result</a>&nbsp;<a href="../../../../src-html/com/yahoo/search/searchers/RateLimitingSearcher.html#line.104">search</a>(<a href="../../../../com/yahoo/search/Query.html" title="class in com.yahoo.search">Query</a>&nbsp;query,
                     <a href="../../../../com/yahoo/search/searchchain/Execution.html" title="class in com.yahoo.search.searchchain">Execution</a>&nbsp;execution)</pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from class:&nbsp;<code><a href="../../../../com/yahoo/search/Searcher.html#search-com.yahoo.search.Query-com.yahoo.search.searchchain.Execution-">Searcher</a></code></span></div>
<div class="block">Override this to implement your searcher.
 <p>
 Searcher implementation subclasses will, depending on their type of logic, do one of the following:
 <ul>
 <li><b>Query processors:</b> Access the query, then call execution.search and return the result
 <li><b>Result processors:</b> Call execution.search to get the result, access it and return
 <li><b>Sources</b> (which produces results): Create a result, add the desired hits and return it.
 <li><b>Federators</b> (which forwards the search to multiple subchains): Call search on the
 desired subchains in parallel and get the results. Combine the results to one and return it.
 <li><b>Workflows:</b> Call execution.search as many times as desired, using different queries.
 Eventually return a result.
 </ul>
 <p>
 Hits come in two kinds - <i>concrete hits</i> are actual
 content of the kind requested by the user, <i>meta hits</i> are
 hits which provides information about the collection of hits,
 on the query, the service and so on.
 <p>
 The query specifies a window into a larger result list that must be returned from the searcher
 through <i>hits</i> and <i>offset</i>;
 Searchers which returns list of hits in the top level in the result
 must return at least <i>hits</i> number of hits (or if impossible; all that are available),
 starting at the given offset.
 In addition, searchers are allowed to return
 any number of meta hits (although this number is expected to be low).
 For hits contained in nested hit groups, the concept of a window defined by hits and offset
 is not well defined and does not apply.
 <p>
 Error handling in searchers:
 <ul>
 <li>Unexpected events: Throw any RuntimeException. This query will fail
 with the exception message, and the error will be logged
 <li>Expected events: Create (new Result(Query, ErrorMessage) or add
 result.setErrorIfNoOtherErrors(ErrorMessage) an error message to the Result.
 <li>Recoverable user errors: Add a FeedbackHit explaining the condition
 and how to correct it.
 </ul></div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../com/yahoo/search/Searcher.html#search-com.yahoo.search.Query-com.yahoo.search.searchchain.Execution-">search</a></code>&nbsp;in class&nbsp;<code><a href="../../../../com/yahoo/search/Searcher.html" title="class in com.yahoo.search">Searcher</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>query</code> - the query</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the result of making this query</dd>
</dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../com/yahoo/search/searchers/InputCheckingSearcher.html" title="class in com.yahoo.search.searchers"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../../com/yahoo/search/searchers/ValidateMatchPhaseSearcher.html" title="class in com.yahoo.search.searchers"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?com/yahoo/search/searchers/RateLimitingSearcher.html" target="_top">Frames</a></li>
<li><a href="RateLimitingSearcher.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
