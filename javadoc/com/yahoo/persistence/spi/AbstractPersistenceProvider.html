<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (1.8.0_60) on Fri Mar 31 07:36:44 UTC 2017 -->
<title>AbstractPersistenceProvider</title>
<meta name="date" content="2017-03-31">
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="AbstractPersistenceProvider";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":10,"i1":10,"i2":10,"i3":10,"i4":10,"i5":10,"i6":10,"i7":10,"i8":10,"i9":10,"i10":10};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li>Prev&nbsp;Class</li>
<li><a href="../../../../com/yahoo/persistence/spi/Bucket.html" title="class in com.yahoo.persistence.spi"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?com/yahoo/persistence/spi/AbstractPersistenceProvider.html" target="_top">Frames</a></li>
<li><a href="AbstractPersistenceProvider.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">com.yahoo.persistence.spi</div>
<h2 title="Class AbstractPersistenceProvider" class="title">Class AbstractPersistenceProvider</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li><a href="http://download.java.net/jdk8/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">java.lang.Object</a></li>
<li>
<ul class="inheritance">
<li>com.yahoo.persistence.spi.AbstractPersistenceProvider</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Implemented Interfaces:</dt>
<dd><a href="../../../../com/yahoo/persistence/spi/PersistenceProvider.html" title="interface in com.yahoo.persistence.spi">PersistenceProvider</a></dd>
</dl>
<hr>
<br>
<pre>public abstract class <a href="../../../../src-html/com/yahoo/persistence/spi/AbstractPersistenceProvider.html#line.16">AbstractPersistenceProvider</a>
extends <a href="http://download.java.net/jdk8/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a>
implements <a href="../../../../com/yahoo/persistence/spi/PersistenceProvider.html" title="interface in com.yahoo.persistence.spi">PersistenceProvider</a></pre>
<div class="block">An abstract class that implements persistence provider functionality that some providers
 may not have use for.</div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== NESTED CLASS SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="nested.class.summary">
<!--   -->
</a>
<h3>Nested Class Summary</h3>
<ul class="blockList">
<li class="blockList"><a name="nested.classes.inherited.from.class.com.yahoo.persistence.spi.PersistenceProvider">
<!--   -->
</a>
<h3>Nested classes/interfaces inherited from interface&nbsp;com.yahoo.persistence.spi.<a href="../../../../com/yahoo/persistence/spi/PersistenceProvider.html" title="interface in com.yahoo.persistence.spi">PersistenceProvider</a></h3>
<code><a href="../../../../com/yahoo/persistence/spi/PersistenceProvider.IncludedVersions.html" title="enum in com.yahoo.persistence.spi">PersistenceProvider.IncludedVersions</a>, <a href="../../../../com/yahoo/persistence/spi/PersistenceProvider.MaintenanceLevel.html" title="enum in com.yahoo.persistence.spi">PersistenceProvider.MaintenanceLevel</a></code></li>
</ul>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><span class="memberNameLink"><a href="../../../../com/yahoo/persistence/spi/AbstractPersistenceProvider.html#AbstractPersistenceProvider--">AbstractPersistenceProvider</a></span>()</code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code><a href="../../../../com/yahoo/persistence/spi/result/Result.html" title="class in com.yahoo.persistence.spi.result">Result</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/yahoo/persistence/spi/AbstractPersistenceProvider.html#flush-com.yahoo.persistence.spi.Bucket-">flush</a></span>(<a href="../../../../com/yahoo/persistence/spi/Bucket.html" title="class in com.yahoo.persistence.spi">Bucket</a>&nbsp;bucket)</code>
<div class="block">
 For providers that store data persistently on disk, the contract of
 flush is that data has been stored persistently so that if the node should
 restart, the data will be available.</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code><a href="../../../../com/yahoo/persistence/spi/result/BucketIdListResult.html" title="class in com.yahoo.persistence.spi.result">BucketIdListResult</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/yahoo/persistence/spi/AbstractPersistenceProvider.html#getModifiedBuckets--">getModifiedBuckets</a></span>()</code>
<div class="block">This function is called continuously by the service layer.</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code><a href="../../../../com/yahoo/persistence/spi/result/PartitionStateListResult.html" title="class in com.yahoo.persistence.spi.result">PartitionStateListResult</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/yahoo/persistence/spi/AbstractPersistenceProvider.html#getPartitionStates--">getPartitionStates</a></span>()</code>
<div class="block">Returns a list of the partitions available,
 and which are up and down.</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code><a href="../../../../com/yahoo/persistence/spi/result/Result.html" title="class in com.yahoo.persistence.spi.result">Result</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/yahoo/persistence/spi/AbstractPersistenceProvider.html#initialize--">initialize</a></span>()</code>
<div class="block">Initializes the persistence provider.</div>
</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code><a href="../../../../com/yahoo/persistence/spi/result/Result.html" title="class in com.yahoo.persistence.spi.result">Result</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/yahoo/persistence/spi/AbstractPersistenceProvider.html#maintain-com.yahoo.persistence.spi.Bucket-com.yahoo.persistence.spi.PersistenceProvider.MaintenanceLevel-">maintain</a></span>(<a href="../../../../com/yahoo/persistence/spi/Bucket.html" title="class in com.yahoo.persistence.spi">Bucket</a>&nbsp;bucket,
        <a href="../../../../com/yahoo/persistence/spi/PersistenceProvider.MaintenanceLevel.html" title="enum in com.yahoo.persistence.spi">PersistenceProvider.MaintenanceLevel</a>&nbsp;level)</code>
<div class="block">Allows the provider to do periodic maintenance and verification.</div>
</td>
</tr>
<tr id="i5" class="rowColor">
<td class="colFirst"><code><a href="../../../../com/yahoo/persistence/spi/result/Result.html" title="class in com.yahoo.persistence.spi.result">Result</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/yahoo/persistence/spi/AbstractPersistenceProvider.html#move-com.yahoo.persistence.spi.Bucket-short-">move</a></span>(<a href="../../../../com/yahoo/persistence/spi/Bucket.html" title="class in com.yahoo.persistence.spi">Bucket</a>&nbsp;bucket,
    short&nbsp;partitionId)</code>
<div class="block">Moves a bucket from one partition to another.</div>
</td>
</tr>
<tr id="i6" class="altColor">
<td class="colFirst"><code><a href="../../../../com/yahoo/persistence/spi/result/Result.html" title="class in com.yahoo.persistence.spi.result">Result</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/yahoo/persistence/spi/AbstractPersistenceProvider.html#removeEntry-com.yahoo.persistence.spi.Bucket-long-">removeEntry</a></span>(<a href="../../../../com/yahoo/persistence/spi/Bucket.html" title="class in com.yahoo.persistence.spi">Bucket</a>&nbsp;bucket,
           long&nbsp;timestampToRemove)</code>
<div class="block">Removes the entry with the given timestamp.</div>
</td>
</tr>
<tr id="i7" class="rowColor">
<td class="colFirst"><code><a href="../../../../com/yahoo/persistence/spi/result/RemoveResult.html" title="class in com.yahoo.persistence.spi.result">RemoveResult</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/yahoo/persistence/spi/AbstractPersistenceProvider.html#removeIfFound-com.yahoo.persistence.spi.Bucket-long-com.yahoo.document.DocumentId-">removeIfFound</a></span>(<a href="../../../../com/yahoo/persistence/spi/Bucket.html" title="class in com.yahoo.persistence.spi">Bucket</a>&nbsp;bucket,
             long&nbsp;timestamp,
             <a href="../../../../com/yahoo/document/DocumentId.html" title="class in com.yahoo.document">DocumentId</a>&nbsp;id)</code>
<div class="block">
 See remove()</div>
</td>
</tr>
<tr id="i8" class="altColor">
<td class="colFirst"><code><a href="../../../../com/yahoo/persistence/spi/result/Result.html" title="class in com.yahoo.persistence.spi.result">Result</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/yahoo/persistence/spi/AbstractPersistenceProvider.html#setActiveState-com.yahoo.persistence.spi.Bucket-com.yahoo.persistence.spi.BucketInfo.ActiveState-">setActiveState</a></span>(<a href="../../../../com/yahoo/persistence/spi/Bucket.html" title="class in com.yahoo.persistence.spi">Bucket</a>&nbsp;bucket,
              <a href="../../../../com/yahoo/persistence/spi/BucketInfo.ActiveState.html" title="enum in com.yahoo.persistence.spi">BucketInfo.ActiveState</a>&nbsp;active)</code>
<div class="block">Sets the bucket state to active or inactive.</div>
</td>
</tr>
<tr id="i9" class="rowColor">
<td class="colFirst"><code><a href="../../../../com/yahoo/persistence/spi/result/Result.html" title="class in com.yahoo.persistence.spi.result">Result</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/yahoo/persistence/spi/AbstractPersistenceProvider.html#setClusterState-com.yahoo.persistence.spi.ClusterState-">setClusterState</a></span>(<a href="../../../../com/yahoo/persistence/spi/ClusterState.html" title="interface in com.yahoo.persistence.spi">ClusterState</a>&nbsp;state)</code>
<div class="block">Updates the persistence provider with the last cluster state.</div>
</td>
</tr>
<tr id="i10" class="altColor">
<td class="colFirst"><code><a href="../../../../com/yahoo/persistence/spi/result/UpdateResult.html" title="class in com.yahoo.persistence.spi.result">UpdateResult</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/yahoo/persistence/spi/AbstractPersistenceProvider.html#update-com.yahoo.persistence.spi.Bucket-long-com.yahoo.document.DocumentUpdate-">update</a></span>(<a href="../../../../com/yahoo/persistence/spi/Bucket.html" title="class in com.yahoo.persistence.spi">Bucket</a>&nbsp;bucket,
      long&nbsp;timestamp,
      <a href="../../../../com/yahoo/document/DocumentUpdate.html" title="class in com.yahoo.document">DocumentUpdate</a>&nbsp;update)</code>
<div class="block">Partially modifies a document referenced by the document update.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.<a href="http://download.java.net/jdk8/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></h3>
<code><a href="http://download.java.net/jdk8/docs/api/java/lang/Object.html?is-external=true#clone--" title="class or interface in java.lang">clone</a>, <a href="http://download.java.net/jdk8/docs/api/java/lang/Object.html?is-external=true#equals-java.lang.Object-" title="class or interface in java.lang">equals</a>, <a href="http://download.java.net/jdk8/docs/api/java/lang/Object.html?is-external=true#finalize--" title="class or interface in java.lang">finalize</a>, <a href="http://download.java.net/jdk8/docs/api/java/lang/Object.html?is-external=true#getClass--" title="class or interface in java.lang">getClass</a>, <a href="http://download.java.net/jdk8/docs/api/java/lang/Object.html?is-external=true#hashCode--" title="class or interface in java.lang">hashCode</a>, <a href="http://download.java.net/jdk8/docs/api/java/lang/Object.html?is-external=true#notify--" title="class or interface in java.lang">notify</a>, <a href="http://download.java.net/jdk8/docs/api/java/lang/Object.html?is-external=true#notifyAll--" title="class or interface in java.lang">notifyAll</a>, <a href="http://download.java.net/jdk8/docs/api/java/lang/Object.html?is-external=true#toString--" title="class or interface in java.lang">toString</a>, <a href="http://download.java.net/jdk8/docs/api/java/lang/Object.html?is-external=true#wait--" title="class or interface in java.lang">wait</a>, <a href="http://download.java.net/jdk8/docs/api/java/lang/Object.html?is-external=true#wait-long-" title="class or interface in java.lang">wait</a>, <a href="http://download.java.net/jdk8/docs/api/java/lang/Object.html?is-external=true#wait-long-int-" title="class or interface in java.lang">wait</a></code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.com.yahoo.persistence.spi.PersistenceProvider">
<!--   -->
</a>
<h3>Methods inherited from interface&nbsp;com.yahoo.persistence.spi.<a href="../../../../com/yahoo/persistence/spi/PersistenceProvider.html" title="interface in com.yahoo.persistence.spi">PersistenceProvider</a></h3>
<code><a href="../../../../com/yahoo/persistence/spi/PersistenceProvider.html#createBucket-com.yahoo.persistence.spi.Bucket-">createBucket</a>, <a href="../../../../com/yahoo/persistence/spi/PersistenceProvider.html#createIterator-com.yahoo.persistence.spi.Bucket-com.yahoo.document.fieldset.FieldSet-com.yahoo.persistence.spi.Selection-com.yahoo.persistence.spi.PersistenceProvider.IncludedVersions-">createIterator</a>, <a href="../../../../com/yahoo/persistence/spi/PersistenceProvider.html#deleteBucket-com.yahoo.persistence.spi.Bucket-">deleteBucket</a>, <a href="../../../../com/yahoo/persistence/spi/PersistenceProvider.html#destroyIterator-long-">destroyIterator</a>, <a href="../../../../com/yahoo/persistence/spi/PersistenceProvider.html#get-com.yahoo.persistence.spi.Bucket-com.yahoo.document.fieldset.FieldSet-com.yahoo.document.DocumentId-">get</a>, <a href="../../../../com/yahoo/persistence/spi/PersistenceProvider.html#getBucketInfo-com.yahoo.persistence.spi.Bucket-">getBucketInfo</a>, <a href="../../../../com/yahoo/persistence/spi/PersistenceProvider.html#iterate-long-long-">iterate</a>, <a href="../../../../com/yahoo/persistence/spi/PersistenceProvider.html#join-com.yahoo.persistence.spi.Bucket-com.yahoo.persistence.spi.Bucket-com.yahoo.persistence.spi.Bucket-">join</a>, <a href="../../../../com/yahoo/persistence/spi/PersistenceProvider.html#listBuckets-short-">listBuckets</a>, <a href="../../../../com/yahoo/persistence/spi/PersistenceProvider.html#put-com.yahoo.persistence.spi.Bucket-long-com.yahoo.document.Document-">put</a>, <a href="../../../../com/yahoo/persistence/spi/PersistenceProvider.html#remove-com.yahoo.persistence.spi.Bucket-long-com.yahoo.document.DocumentId-">remove</a>, <a href="../../../../com/yahoo/persistence/spi/PersistenceProvider.html#split-com.yahoo.persistence.spi.Bucket-com.yahoo.persistence.spi.Bucket-com.yahoo.persistence.spi.Bucket-">split</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="AbstractPersistenceProvider--">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>AbstractPersistenceProvider</h4>
<pre>public&nbsp;<a href="../../../../src-html/com/yahoo/persistence/spi/AbstractPersistenceProvider.html#line.16">AbstractPersistenceProvider</a>()</pre>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="initialize--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>initialize</h4>
<pre>public&nbsp;<a href="../../../../com/yahoo/persistence/spi/result/Result.html" title="class in com.yahoo.persistence.spi.result">Result</a>&nbsp;<a href="../../../../src-html/com/yahoo/persistence/spi/AbstractPersistenceProvider.html#line.18">initialize</a>()</pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="../../../../com/yahoo/persistence/spi/PersistenceProvider.html#initialize--">PersistenceProvider</a></code></span></div>
<div class="block">Initializes the persistence provider. This function is called exactly once when
 the persistence provider starts. If any error is returned here, the service layer
 will shut down.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../com/yahoo/persistence/spi/PersistenceProvider.html#initialize--">initialize</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../com/yahoo/persistence/spi/PersistenceProvider.html" title="interface in com.yahoo.persistence.spi">PersistenceProvider</a></code></dd>
</dl>
</li>
</ul>
<a name="getPartitionStates--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getPartitionStates</h4>
<pre>public&nbsp;<a href="../../../../com/yahoo/persistence/spi/result/PartitionStateListResult.html" title="class in com.yahoo.persistence.spi.result">PartitionStateListResult</a>&nbsp;<a href="../../../../src-html/com/yahoo/persistence/spi/AbstractPersistenceProvider.html#line.23">getPartitionStates</a>()</pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="../../../../com/yahoo/persistence/spi/PersistenceProvider.html#getPartitionStates--">PersistenceProvider</a></code></span></div>
<div class="block">Returns a list of the partitions available,
 and which are up and down.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../com/yahoo/persistence/spi/PersistenceProvider.html#getPartitionStates--">getPartitionStates</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../com/yahoo/persistence/spi/PersistenceProvider.html" title="interface in com.yahoo.persistence.spi">PersistenceProvider</a></code></dd>
</dl>
</li>
</ul>
<a name="setClusterState-com.yahoo.persistence.spi.ClusterState-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setClusterState</h4>
<pre>public&nbsp;<a href="../../../../com/yahoo/persistence/spi/result/Result.html" title="class in com.yahoo.persistence.spi.result">Result</a>&nbsp;<a href="../../../../src-html/com/yahoo/persistence/spi/AbstractPersistenceProvider.html#line.30">setClusterState</a>(<a href="../../../../com/yahoo/persistence/spi/ClusterState.html" title="interface in com.yahoo.persistence.spi">ClusterState</a>&nbsp;state)</pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="../../../../com/yahoo/persistence/spi/PersistenceProvider.html#setClusterState-com.yahoo.persistence.spi.ClusterState-">PersistenceProvider</a></code></span></div>
<div class="block">Updates the persistence provider with the last cluster state.
 Only cluster states that are relevant for the provider are supplied (changes
 that relate to the distributor will not cause an update here).</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../com/yahoo/persistence/spi/PersistenceProvider.html#setClusterState-com.yahoo.persistence.spi.ClusterState-">setClusterState</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../com/yahoo/persistence/spi/PersistenceProvider.html" title="interface in com.yahoo.persistence.spi">PersistenceProvider</a></code></dd>
</dl>
</li>
</ul>
<a name="setActiveState-com.yahoo.persistence.spi.Bucket-com.yahoo.persistence.spi.BucketInfo.ActiveState-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setActiveState</h4>
<pre>public&nbsp;<a href="../../../../com/yahoo/persistence/spi/result/Result.html" title="class in com.yahoo.persistence.spi.result">Result</a>&nbsp;<a href="../../../../src-html/com/yahoo/persistence/spi/AbstractPersistenceProvider.html#line.35">setActiveState</a>(<a href="../../../../com/yahoo/persistence/spi/Bucket.html" title="class in com.yahoo.persistence.spi">Bucket</a>&nbsp;bucket,
                             <a href="../../../../com/yahoo/persistence/spi/BucketInfo.ActiveState.html" title="enum in com.yahoo.persistence.spi">BucketInfo.ActiveState</a>&nbsp;active)</pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="../../../../com/yahoo/persistence/spi/PersistenceProvider.html#setActiveState-com.yahoo.persistence.spi.Bucket-com.yahoo.persistence.spi.BucketInfo.ActiveState-">PersistenceProvider</a></code></span></div>
<div class="block">Sets the bucket state to active or inactive. After this returns,
 other buckets may be deactivated, so the node must be able to serve
 the data from its secondary index or get reduced coverage.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../com/yahoo/persistence/spi/PersistenceProvider.html#setActiveState-com.yahoo.persistence.spi.Bucket-com.yahoo.persistence.spi.BucketInfo.ActiveState-">setActiveState</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../com/yahoo/persistence/spi/PersistenceProvider.html" title="interface in com.yahoo.persistence.spi">PersistenceProvider</a></code></dd>
</dl>
</li>
</ul>
<a name="removeIfFound-com.yahoo.persistence.spi.Bucket-long-com.yahoo.document.DocumentId-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>removeIfFound</h4>
<pre>public&nbsp;<a href="../../../../com/yahoo/persistence/spi/result/RemoveResult.html" title="class in com.yahoo.persistence.spi.result">RemoveResult</a>&nbsp;<a href="../../../../src-html/com/yahoo/persistence/spi/AbstractPersistenceProvider.html#line.41">removeIfFound</a>(<a href="../../../../com/yahoo/persistence/spi/Bucket.html" title="class in com.yahoo.persistence.spi">Bucket</a>&nbsp;bucket,
                                  long&nbsp;timestamp,
                                  <a href="../../../../com/yahoo/document/DocumentId.html" title="class in com.yahoo.document">DocumentId</a>&nbsp;id)</pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="../../../../com/yahoo/persistence/spi/PersistenceProvider.html#removeIfFound-com.yahoo.persistence.spi.Bucket-long-com.yahoo.document.DocumentId-">PersistenceProvider</a></code></span></div>
<div class="block"><p>
 See remove()
 </p>
 <p>
 Used for external remove operations. removeIfFound() has no extra
 postconditions than remove, but it may choose to <i>not</i> include
 a remove entry if there didn't already exist a put entry for the given
 entry. It is recommended, but not required, to not insert entries in this
 case, though if remove entries are considered critical it might be better
 to insert them in both cases.
 </p></div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../com/yahoo/persistence/spi/PersistenceProvider.html#removeIfFound-com.yahoo.persistence.spi.Bucket-long-com.yahoo.document.DocumentId-">removeIfFound</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../com/yahoo/persistence/spi/PersistenceProvider.html" title="interface in com.yahoo.persistence.spi">PersistenceProvider</a></code></dd>
<dd><code>timestamp</code> - The timestamp for the new bucket entry.</dd>
<dd><code>id</code> - The ID to remove</dd>
</dl>
</li>
</ul>
<a name="removeEntry-com.yahoo.persistence.spi.Bucket-long-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>removeEntry</h4>
<pre>public&nbsp;<a href="../../../../com/yahoo/persistence/spi/result/Result.html" title="class in com.yahoo.persistence.spi.result">Result</a>&nbsp;<a href="../../../../src-html/com/yahoo/persistence/spi/AbstractPersistenceProvider.html#line.46">removeEntry</a>(<a href="../../../../com/yahoo/persistence/spi/Bucket.html" title="class in com.yahoo.persistence.spi">Bucket</a>&nbsp;bucket,
                          long&nbsp;timestampToRemove)</pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="../../../../com/yahoo/persistence/spi/PersistenceProvider.html#removeEntry-com.yahoo.persistence.spi.Bucket-long-">PersistenceProvider</a></code></span></div>
<div class="block">Removes the entry with the given timestamp. This is usually used to revert
 previously performed operations. This operation should be
 successful even if there doesn't exist such an entry.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../com/yahoo/persistence/spi/PersistenceProvider.html#removeEntry-com.yahoo.persistence.spi.Bucket-long-">removeEntry</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../com/yahoo/persistence/spi/PersistenceProvider.html" title="interface in com.yahoo.persistence.spi">PersistenceProvider</a></code></dd>
</dl>
</li>
</ul>
<a name="flush-com.yahoo.persistence.spi.Bucket-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>flush</h4>
<pre>public&nbsp;<a href="../../../../com/yahoo/persistence/spi/result/Result.html" title="class in com.yahoo.persistence.spi.result">Result</a>&nbsp;<a href="../../../../src-html/com/yahoo/persistence/spi/AbstractPersistenceProvider.html#line.51">flush</a>(<a href="../../../../com/yahoo/persistence/spi/Bucket.html" title="class in com.yahoo.persistence.spi">Bucket</a>&nbsp;bucket)</pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="../../../../com/yahoo/persistence/spi/PersistenceProvider.html#flush-com.yahoo.persistence.spi.Bucket-">PersistenceProvider</a></code></span></div>
<div class="block"><p>
 For providers that store data persistently on disk, the contract of
 flush is that data has been stored persistently so that if the node should
 restart, the data will be available.
 </p>
 <p>
 The service layer may choose to batch certain commands. This means
 that the service layer will lock the bucket only once, then perform several
 commands, and finally get the bucket info from the bucket, and then flush it.
 This can be used to improve performance by caching the modifications, and
 persisting them to disk only when flush is called. The service layer guarantees
 that after one of these operations, flush() is called, regardless of whether
 the operation succeeded or not, before another bucket is processed in the same
 worker thread. The following operations can be batched and have the guarantees
 above:
 - put
 - get
 - remove
 - removeIfFound
 - update
 - removeEntry
 </p></div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../com/yahoo/persistence/spi/PersistenceProvider.html#flush-com.yahoo.persistence.spi.Bucket-">flush</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../com/yahoo/persistence/spi/PersistenceProvider.html" title="interface in com.yahoo.persistence.spi">PersistenceProvider</a></code></dd>
</dl>
</li>
</ul>
<a name="getModifiedBuckets--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getModifiedBuckets</h4>
<pre>public&nbsp;<a href="../../../../com/yahoo/persistence/spi/result/BucketIdListResult.html" title="class in com.yahoo.persistence.spi.result">BucketIdListResult</a>&nbsp;<a href="../../../../src-html/com/yahoo/persistence/spi/AbstractPersistenceProvider.html#line.56">getModifiedBuckets</a>()</pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="../../../../com/yahoo/persistence/spi/PersistenceProvider.html#getModifiedBuckets--">PersistenceProvider</a></code></span></div>
<div class="block">This function is called continuously by the service layer. It allows
 the provider to signify whether it has done any out-of-band changes to
 buckets that need to be recognized by the rest of the system. The service
 layer will proceed to call getBucketInfo() on each of the returned buckets.
 After a call to getModifiedBuckets(), the provider should clear it's list
 of modified buckets, so that the next call does not return the same buckets.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../com/yahoo/persistence/spi/PersistenceProvider.html#getModifiedBuckets--">getModifiedBuckets</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../com/yahoo/persistence/spi/PersistenceProvider.html" title="interface in com.yahoo.persistence.spi">PersistenceProvider</a></code></dd>
</dl>
</li>
</ul>
<a name="maintain-com.yahoo.persistence.spi.Bucket-com.yahoo.persistence.spi.PersistenceProvider.MaintenanceLevel-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>maintain</h4>
<pre>public&nbsp;<a href="../../../../com/yahoo/persistence/spi/result/Result.html" title="class in com.yahoo.persistence.spi.result">Result</a>&nbsp;<a href="../../../../src-html/com/yahoo/persistence/spi/AbstractPersistenceProvider.html#line.61">maintain</a>(<a href="../../../../com/yahoo/persistence/spi/Bucket.html" title="class in com.yahoo.persistence.spi">Bucket</a>&nbsp;bucket,
                       <a href="../../../../com/yahoo/persistence/spi/PersistenceProvider.MaintenanceLevel.html" title="enum in com.yahoo.persistence.spi">PersistenceProvider.MaintenanceLevel</a>&nbsp;level)</pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="../../../../com/yahoo/persistence/spi/PersistenceProvider.html#maintain-com.yahoo.persistence.spi.Bucket-com.yahoo.persistence.spi.PersistenceProvider.MaintenanceLevel-">PersistenceProvider</a></code></span></div>
<div class="block">Allows the provider to do periodic maintenance and verification.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../com/yahoo/persistence/spi/PersistenceProvider.html#maintain-com.yahoo.persistence.spi.Bucket-com.yahoo.persistence.spi.PersistenceProvider.MaintenanceLevel-">maintain</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../com/yahoo/persistence/spi/PersistenceProvider.html" title="interface in com.yahoo.persistence.spi">PersistenceProvider</a></code></dd>
<dd><code>level</code> - The level of maintenance to do. LOW maintenance is scheduled more
 often than HIGH maintenance, so should be cheaper.</dd>
</dl>
</li>
</ul>
<a name="move-com.yahoo.persistence.spi.Bucket-short-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>move</h4>
<pre>public&nbsp;<a href="../../../../com/yahoo/persistence/spi/result/Result.html" title="class in com.yahoo.persistence.spi.result">Result</a>&nbsp;<a href="../../../../src-html/com/yahoo/persistence/spi/AbstractPersistenceProvider.html#line.66">move</a>(<a href="../../../../com/yahoo/persistence/spi/Bucket.html" title="class in com.yahoo.persistence.spi">Bucket</a>&nbsp;bucket,
                   short&nbsp;partitionId)</pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="../../../../com/yahoo/persistence/spi/PersistenceProvider.html#move-com.yahoo.persistence.spi.Bucket-short-">PersistenceProvider</a></code></span></div>
<div class="block">Moves a bucket from one partition to another.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../com/yahoo/persistence/spi/PersistenceProvider.html#move-com.yahoo.persistence.spi.Bucket-short-">move</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../com/yahoo/persistence/spi/PersistenceProvider.html" title="interface in com.yahoo.persistence.spi">PersistenceProvider</a></code></dd>
<dd><code>partitionId</code> - The partition to move to.</dd>
</dl>
</li>
</ul>
<a name="update-com.yahoo.persistence.spi.Bucket-long-com.yahoo.document.DocumentUpdate-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>update</h4>
<pre>public&nbsp;<a href="../../../../com/yahoo/persistence/spi/result/UpdateResult.html" title="class in com.yahoo.persistence.spi.result">UpdateResult</a>&nbsp;<a href="../../../../src-html/com/yahoo/persistence/spi/AbstractPersistenceProvider.html#line.71">update</a>(<a href="../../../../com/yahoo/persistence/spi/Bucket.html" title="class in com.yahoo.persistence.spi">Bucket</a>&nbsp;bucket,
                           long&nbsp;timestamp,
                           <a href="../../../../com/yahoo/document/DocumentUpdate.html" title="class in com.yahoo.document">DocumentUpdate</a>&nbsp;update)</pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="../../../../com/yahoo/persistence/spi/PersistenceProvider.html#update-com.yahoo.persistence.spi.Bucket-long-com.yahoo.document.DocumentUpdate-">PersistenceProvider</a></code></span></div>
<div class="block">Partially modifies a document referenced by the document update.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../com/yahoo/persistence/spi/PersistenceProvider.html#update-com.yahoo.persistence.spi.Bucket-long-com.yahoo.document.DocumentUpdate-">update</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../com/yahoo/persistence/spi/PersistenceProvider.html" title="interface in com.yahoo.persistence.spi">PersistenceProvider</a></code></dd>
<dd><code>timestamp</code> - The timestamp to use for the new update entry.</dd>
<dd><code>update</code> - The document update to apply to the stored document.</dd>
</dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li>Prev&nbsp;Class</li>
<li><a href="../../../../com/yahoo/persistence/spi/Bucket.html" title="class in com.yahoo.persistence.spi"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?com/yahoo/persistence/spi/AbstractPersistenceProvider.html" target="_top">Frames</a></li>
<li><a href="AbstractPersistenceProvider.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
