---
# Copyright 2017 Yahoo Holdings. Licensed under the terms of the Apache 2.0 license. See LICENSE in the project root.
title: "Search API"
---

<p>
This is the Vespa Search API guide - refer to the
<a href="reference/search-api-reference.html">search API reference</a> for details.

<h2 id="http">HTTP</h2>
<ul>
  <li>
    The <em>host:port</em> endpoint is the <a href="querying-vespa.html">QRS</a> - Query Result Server.
    The general form of a search request is:
<pre>
  http://host:port/search/?param1=value1&amp;param2=value2&amp;...
</pre>
  </li><li>
    The only mandatory parameter is <em>yql</em>
  </li><li>
    Use GET or POST - these are equivalent:
<pre>
$ curl http://localhost:8080/search/?yql=select+%2A+from+sources+%2A+where+default+contains+%22bad%22%3B
$ curl --data yql=select+%2A+from+sources+%2A+where+default+contains+%22bad%22%3B http://localhost:8080/search/
</pre>
  </li><li>
    HTTP keepalive is supported
  </li><li>
    Values must be encoded according to standard URL encoding.
    Thus, space is encoded as +, + as %2b and so on -
    see <a href="http://www.ietf.org/rfc/rfc2396.txt">RFC 2396</a>
  </li>
</ul>





<h2 id="features">Features</h2>
<p>
The query string contains the specification of which results the search should return,
typically some words which should be present in matching documents.
Queries are formulated in <em>YQL</em>.
Note: Also find the legacy
<a href="reference/simple-query-language-reference.html">simple query language</a> reference.
</p><p>
If Vespa cannot generate a valid search expression from the query string,
it will issue the error message <em>Null query</em>.
To troubleshoot, add <a href="reference/search-api-reference.html#tracelevel">&amp;tracelevel=2</a> to the request.
A missing <em>yql</em> parameter will also lead to this error message.
</p><p>
Examples - refer to <a href="query-language.html">YQL</a>, <a href="grouping.html">grouping</a> and the
<a href="reference/sorting.html">sorting reference</a> for details:
<table class="table">
  <thead></thead><tbody>
    <tr>
      <th>Ordering</th>
      <td>
<pre>
$ curl http://localhost:8080/search/?yql=select+%2A+from+sources+%2A+where+default+contains+%22bad%22\
<span style="background-color: yellow;">+order+by+year+desc</span>%3B
</pre>
      </td>
    </tr><tr>
      <th>Grouping</th>
      <td>
<pre>
$ curl http://localhost:8080/search/?yql=select+%2A+from+sources+%2A+where+default+contains+%22bad%22\
<span style="background-color: yellow;">+%7Call%28group%28year%29+each%28output%28sum%28duration%29%29%29%29</span>%3B
</pre>
      </td>
    </tr><tr>
      <th>Pagination</th>
      <td>
<pre>
$ curl http://localhost:8080/search/?yql=select+%2A+from+sources+%2A+where+default+contains+%22bad%22\
<span style="background-color: yellow;">+limit+2+offset+1</span>%3B
</pre>
      </td>
    </tr><tr>
      <th>Numeric</th>
      <td>
<pre>
$ curl http://localhost:8080/search/?yql=select+%2A+from+sources+%2A+where+<span style="background-color: yellow;">year+%3E+2000</span>%3B
</pre>
      </td>
    </tr><tr>
      <th>Timeout</th>
      <td>
<pre>
$ curl http://localhost:8080/search/?yql=select+%2A+from+sources+%2A+where+default+contains+%22bad%22\
<span style="background-color: yellow;">+timeout+100</span>%3B
</pre>
      </td>
    </tr>
  </tbody>
</table>
</p>



<h3 id="query-params">Query parameters</h3>
<p>
YQL is limited, below is a list of parameter that can be used in queries - refer to the
<a href="reference/search-api-reference.html">search API reference</a>,
for the full list.
<table class="table">
  <thead></thead><tbody>
    <tr><th>tracelevel</th>
      <td>
        Set to a positive integer to see query <a href="reference/search-api-reference.html#tracelevel">tracing</a>.
        Higher numbers produce more tracing output</td>
    </tr><tr>
      <th>pos.ll</th>
      <td>
        Position - see <a href="geo-search.html">geo search</a>
      </td>
    </tr>
  </tbody>
</table>
</p>


<h2 id="default-result-format">Default Result Format</h2>
<p>
The default output format is JSON as defined in the
<a href="./reference/default-result-format.html#default-json">reference</a>.
The basic structure is:
<pre>
{
    "root": {
        "children": [
            objects with same structure as root itself...
        ],
        "fields": {
            "document field name": "document field contents",
            â€¦
        }
    }
}
</pre>
As for a complete example of the structure:
<pre>
{
    "root": {
        "children": [
            {
                "children": [
                    {
                        "fields": {
                            "c": "d",
                            "uri": "http://localhost/1"
                        },
                        "id": "http://localhost/1",
                        "relevance": 0.9,
                        "types": [
                            "summary"
                        ]
                    }
                ],
                "id": "usual",
                "relevance": 1.0
            },
            {
                "fields": {
                    "e": "f"
                },
                "id": "type grouphit",
                "relevance": 1.0,
                "types": [
                    "grouphit"
                ]
            },
            {
                "fields": {
                    "description": "foo",
                    "uri": "http://localhost/"
                },
                "id": "http://localhost/",
                "relevance": 0.95,
                "types": [
                    "summary"
                ]
            }
        ],
        "coverage": {
            "coverage": 100,
            "documents": 500,
            "full": true,
            "nodes": 1,
            "results": 1,
            "resultsFull": 1
        },
        "errors": [
            {
                "code": 18,
                "message": "boom",
                "summary": "Internal server error."
            }
        ],
        "fields": {
            "totalCount": 130
        },
        "id": "toplevel",
        "relevance": 1.0
    }
}
</pre>
</p>
