---
# Copyright 2019 Oath Inc. Licensed under the terms of the Apache 2.0 license. See LICENSE in the project root.
title: "Security model"
---

<h1>Management</h1>
<h2>Access to Vespa console</h2>
<p>
    Console access is available to authenticated users only. Access is granted based on role membership as defined in <a href="#roles">roles</a>.
</p>
<h2>Application deployment</h2>
<p>
    Deploying applications can be done by any user member of a role with deploy privileges (see <a href="#roles">roles</a>). Additionally every application can have deploy key which can be used by the maven plugin.
</p>
<h2 id="roles">Roles</h2>
<p>
    <table class="table">
            <tr><td>tenant owner</td><td>Inherits tenant admin, and can additionally delete tenant</td></tr>
            <tr><td>tenant admin</td><td>Inherits tenant operator and application admin. Can also manage tenant metadata and delete applications</td></tr>
            <tr><td>tenant operator</td><td>Can create applications and see tenant information.</td></tr>
            <tr><td>application admin</td><td>Inherits application operator and application developer. Can also update/delete application and submit new application packages.</td></tr>
            <tr><td>application operator</td><td>Inherits application reader. Can also perform application operation tasks (e.g. restart nodes)</td></tr>
            <tr><td>application developer</td><td>Inherits application reader. Can also deploy applications to development zones.</td></tr>
            <tr><td>application reader</td><td>Can see information about an application.</td></tr>
    </table>    
</p>
<h1>Application access control</h1>
<p>All applications are secured using mutual TLS</p>
<h2>Server certificate</h2>
<p>
    On first time deployment a server certificate identifying the application will be provisioned. This certificate will be automatically set up
    on all application endpoints. The certificate will be signed by DigiCert or Globalsign.
</p>
<h2>Client certificate</h2>
<p>
    To enable TLS client side authentication follow these steps:
    <ol>
        <li>Add trusted certificates (or issuer certificates) to file <em>security/clients.pem</em> and include this in the application package</li>
        <li>Add a tag to the container element (in services.xml): <pre>&lt;client-authorize /&gt;</pre></li>
        <li>After deploying the application package, only clients presenting a valid certificate will be able to access application endpoints</li>
    </ol>
</p>
<p class="alert-warning">
        Note: in order to test application upgrades we will append a trusted client certificate in test/staging zones. This will not affect production deployments.
</p>
<h2>Internal node to node communication</h2>
All internal communication are secured with several layers:
<ul>
    <li>Network ACLs (iptables) allowing application only local communication</li>
    <li>Mutual TLS with authorization only allowing nodes from application</li>    
</ul>
